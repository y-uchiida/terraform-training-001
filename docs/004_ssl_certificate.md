# SSL 証明書の設定

Terraform で SSL 証明書を設定する時の注意点

## ACM 側の設定

### ドメイン証明書自体の設定を作成する

`aws_acm_certificate` リソースで、ACM サービス内に証明書の設定を行う

このとき、 `validation_method` に `DNS` を指定することで、DNS レコードを用いたドメインの所有権を確認することができる

また、 SSL証明書を作成するドメイン名のゾーンが、Route53 に設定されている必要がある  

`depends_on` で、Route53 の設定が完了してから、ACM の設定を行うようにする

### ドメイン証明書の検証

`aws_acm_certificate_validation` リソースで、証明書の検証を行う  

ドメインを取得したサービス(お名前.com など)で、DNS レコードを設定する必要がある

設定すべきレコードは、 AWS コンソールの画面から確認できる `CNAME` レコード

つまり、ドメイン管理サービス側では、

- Route 53 のネームサーバーを参照するようにするためのNS レコード
- SSL 証明書の検証を行うための CNAME レコード(DNS で検証する場合)

の2種類を設定する必要がある  
